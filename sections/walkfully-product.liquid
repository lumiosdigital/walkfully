{%- liquid
  assign product_form_id = 'product-form-' | append: section.id
  assign short_description = product.metafields.custom.short_description
-%}

<section-product
  class="walkfully-product"
  data-section="{{ section.id }}"
  data-id="{{ section.id }}"
  data-product-id="{{ product.id }}"
  data-product-url="{{ product.url }}"
  data-product-handle="{{ product.handle }}"
  data-media-layout-desktop="swiper"
  data-media-layout-mobile="swiper"
  data-media-bounds="contained"
  data-media-position="left"
  data-should-update-url="true"
  data-can-add-as-recently-viewed="true"
>
  <div class="walkfully-product__breadcrumbs">
    {% render 'breadcrumbs' %}
  </div>

  <div class="walkfully-product__layout">
    <div class="walkfully-product__gallery">
      {% render 'product-media-gallery',
        prod: product,
        media_aspect_ratio: 'default',
        media_width: 8,
        image_bounds: 'contained',
        enable_lightbox: false,
        enable_video_looping: false,
        no_radius: true,
        media_layout_desktop: 'swiper',
        media_layout_mobile: 'swiper',
        auto_play_videos: false
      %}
    </div>

    <div class="walkfully-product__info product__details-content" data-product-url="{{ product.url }}">
      <div class="walkfully-product__info-inner">
        <div class="walkfully-product__header">
          <h1 class="walkfully-product__title">{{ product.title }}</h1>

          {%- if short_description != blank -%}
            <div class="walkfully-product__description">{{ short_description }}</div>
          {%- endif -%}
        </div>

        <div class="walkfully-product__card">
          {%- unless product.has_only_default_variant -%}
            <component-product-variant-selectors
              class="product-variant-selectors walkfully-product__variants"
              data-update-variant-picker
              data-variant-id="{{ product.selected_or_first_available_variant.id }}"
            >
              {%- for option in product.options_with_values -%}
                <div class="walkfully-product__option" data-product-option>
                  <span class="walkfully-product__option-label">
                    {{ 'sections.walkfully_product.choose_color' | t | newline_to_br }}
                  </span>

                  <fieldset class="walkfully-product__fieldset">
                    <legend class="visually-hidden">{{ option.name }}</legend>
                    <div class="walkfully-product__swatches">
                      {%- for value in option.values -%}
                        <div class="walkfully-product__swatch-item swatch">
                          {% render 'swatch',
                            value: value,
                            option: option,
                            product_form_id: product_form_id,
                            id: section.id,
                            option_name: option.name
                          %}
                          <span class="walkfully-product__swatch-name">{{ value.name }}</span>
                        </div>
                      {%- endfor -%}
                    </div>
                  </fieldset>
                </div>
              {%- endfor -%}

              <script type="application/json" data-selected-variant>
                {{ product.selected_or_first_available_variant | json }}
              </script>
            </component-product-variant-selectors>
          {%- endunless -%}

          <div class="walkfully-product__purchase">
            <div class="walkfully-product__price" data-update-price>
              {%- if product.selected_or_first_available_variant.price -%}
                {%- render 'price', prod: product, use_variant: true -%}
              {%- endif -%}
            </div>

            <component-product-form
              data-product-url="{{ product.url }}"
              class="product-form walkfully-product__form"
            >
              {%- form 'product', product, id: product_form_id, novalidate: 'novalidate' -%}
                <input
                  type="hidden"
                  name="id"
                  value="{{ product.selected_or_first_available_variant.id }}"
                  {% if product.selected_or_first_available_variant.available == false or product.selected_or_first_available_variant == null %}
                    disabled
                  {% endif %}
                  data-update-hidden-id
                >

                <div class="product-form__error-message fs--1">
                  <span class="product-form__error-message-text"></span>
                </div>

                <div class="product-form__buttons" data-update-buy-buttons>
                  <div class="product-form__submit-wrapper">
                    <button
                      type="submit"
                      name="add"
                      class="walkfully-product__add-to-cart product-form__submit btn btn--full-width"
                      data-update-buy-buttons-tunneled
                      {% if product.selected_or_first_available_variant.available == false or product.selected_or_first_available_variant == null %}
                        disabled
                      {% endif %}
                    >
                      <span>
                        {%- if product.selected_or_first_available_variant == null -%}
                          {{ 'products.product.unavailable' | t }}
                        {%- elsif product.selected_or_first_available_variant.available == false -%}
                          {{ 'products.product.sold_out' | t }}
                        {%- else -%}
                          {{ 'products.product.add_to_cart' | t }}
                        {%- endif -%}
                      </span>
                      {% render 'loader', type: 'spinner', size: '1em' %}
                    </button>
                  </div>
                </div>
              {%- endform -%}
            </component-product-form>
          </div>
        </div>

        {%- if section.blocks.size > 0 -%}
          <div class="walkfully-product__trust-badges">
            {%- for block in section.blocks -%}
              {%- if block.type == 'trust_badge' -%}
                <div class="walkfully-product__trust-badge" {{ block.shopify_attributes }}>
                  {%- case block.settings.icon -%}
                    {%- when 'shipping' -%}
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <g opacity="0.3" clip-path="url(#clip-shipping-{{ block.id }})">
                          <path d="M18.9999 11.994L22.5349 8.53598C24.4849 6.58598 24.4849 3.41398 22.5349 1.46498C21.5909 0.520977 20.3349 0.000976562 18.9999 0.000976562C17.6649 0.000976562 16.4089 0.520977 15.4639 1.46498C13.5149 3.41498 13.5149 6.58698 15.4719 8.54398L18.9999 11.994ZM16.8779 2.87898C17.4449 2.31198 18.1979 1.99998 18.9999 1.99998C19.8019 1.99998 20.5549 2.31198 21.1209 2.87798C22.2909 4.04798 22.2909 5.95098 21.1289 7.11298L18.9999 9.19498L16.8779 7.12098C15.7089 5.95098 15.7089 4.04898 16.8779 2.87898ZM8.99991 20V21H6.49991L4.58891 23.421C4.39391 23.778 4.01991 24 3.61391 24H2.50091L3.66791 21H1.64991L0.103912 19.167C-0.193088 18.647 0.181912 18 0.780912 18C0.987912 18 1.18591 18.082 1.33191 18.228L2.44191 19H3.68291L2.49891 16H3.59491C4.00191 16 4.37591 16.222 4.56991 16.579L6.49891 19H7.74891C8.55091 19 8.99891 19.448 8.99891 20H8.99991ZM23.9999 17C23.9999 19.206 22.2059 21 19.9999 21H10.9999V20C10.9999 19.646 10.9389 19.31 10.8279 19H19.9999C21.1029 19 21.9999 18.103 21.9999 17C21.9999 15.897 21.1029 15 19.9999 15H8.99991C6.79391 15 4.99991 13.206 4.99991 11C4.99991 8.79398 6.79391 6.99998 8.99991 6.99998H12.2989C12.5069 7.70198 12.8279 8.37798 13.2599 8.99998H8.99991C7.89691 8.99998 6.99991 9.89698 6.99991 11C6.99991 12.103 7.89691 13 8.99991 13H19.9999C22.2059 13 23.9999 14.794 23.9999 17Z" fill="#21262F"/>
                          <path d="M19 5.78711C19.5523 5.78711 20 5.33939 20 4.78711C20 4.23482 19.5523 3.78711 19 3.78711C18.4477 3.78711 18 4.23482 18 4.78711C18 5.33939 18.4477 5.78711 19 5.78711Z" fill="#21262F"/>
                        </g>
                        <defs>
                          <clipPath id="clip-shipping-{{ block.id }}">
                            <rect width="24" height="24" fill="white"/>
                          </clipPath>
                        </defs>
                      </svg>
                    {%- when 'returns' -%}
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <g opacity="0.3">
                          <path d="M21.999 21H20.2491C20.2473 19.4147 19.6014 17.8949 18.4532 16.774C17.305 15.653 15.7483 15.0225 14.1245 15.0207H9.89846V20.4994L1.76754 12.5615C1.27546 12.0809 0.999023 11.4292 0.999023 10.7497C0.999023 10.0702 1.27546 9.41854 1.76754 8.93799L9.89846 1V6.47877H14.1245C16.2122 6.48103 18.2138 7.29171 19.6901 8.73295C21.1663 10.1742 21.9967 12.1283 21.999 14.1665V21ZM8.14856 5.12403L3.00472 10.1458C2.8407 10.306 2.74855 10.5232 2.74855 10.7497C2.74855 10.9762 2.8407 11.1934 3.00472 11.3536L8.14856 16.3754V13.3123H14.1245C15.2994 13.3122 16.4594 13.5691 17.5193 14.0642C18.5791 14.5592 19.5119 15.2798 20.2491 16.173V14.1665C20.2473 12.5812 19.6014 11.0614 18.4532 9.94046C17.305 8.81951 15.7483 8.18896 14.1245 8.18715H8.14856V5.12403Z" fill="#21262F"/>
                        </g>
                      </svg>
                    {%- when 'secure-checkout' -%}
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <g opacity="0.3">
                          <path d="M17.8776 8.62426H17.6718V6.56852C17.6718 3.49574 15.1298 1 12 1C8.8702 1 6.32816 3.49574 6.32816 6.56852V8.62426H6.12245C4.40327 8.62426 3 10.002 3 11.6898V19.9344C3 21.6223 4.40327 23 6.12245 23H17.8776C19.5967 23 21 21.6223 21 19.9344V11.6898C21 10.002 19.5967 8.62426 17.8776 8.62426ZM12 2.80328C13.0212 2.80328 13.991 3.19279 14.711 3.90689C15.4384 4.62098 15.8351 5.5659 15.8351 6.56852V8.62426H8.1649V6.56852C8.1649 4.49115 9.88408 2.80328 12 2.80328ZM4.83673 11.6898C4.83673 10.9974 5.41714 10.4275 6.12245 10.4275H17.8776C18.5829 10.4275 19.1633 10.9974 19.1633 11.6898V19.9344C19.1633 20.6269 18.5829 21.1967 17.8776 21.1967H6.12245C5.41714 21.1967 4.83673 20.6269 4.83673 19.9344V11.6898Z" fill="#21262F"/>
                          <path d="M10.6929 18.0122C10.6929 18.5552 11.1501 18.9958 11.7133 18.9958H12.2929C12.8562 18.9958 13.3133 18.5552 13.3133 18.0122V16.226C13.6154 15.9112 13.7868 15.5021 13.795 15.0693C13.795 14.605 13.6235 14.1722 13.2888 13.8339C12.9541 13.4955 12.4807 13.3066 11.999 13.3066C11.0113 13.3066 10.2031 14.0857 10.2031 15.0378C10.2031 15.4784 10.3746 15.9034 10.6848 16.2181V18.0043L10.6929 18.0122Z" fill="#21262F"/>
                        </g>
                      </svg>
                  {%- endcase -%}
                  <span class="walkfully-product__trust-badge-text">{{ block.settings.text }}</span>
                </div>
              {%- endif -%}
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>

  <script type="application/ld+json">
    {{ product | structured_data }}
  </script>

  <script>
    (function() {
      const section = document.querySelector('.walkfully-product');
      if (!section) return;

      const slider = section.querySelector('component-slider');
      if (!slider) return;

      function fixSwiper() {
        if (!slider.swiper) {
          requestAnimationFrame(fixSwiper);
          return;
        }
        if (window.innerWidth <= 990) {
          slider.swiper.params.slidesPerView = 1;
          slider.swiper.params.spaceBetween = 0;
          Object.keys(slider.swiper.params.breakpoints || {}).forEach(function(bp) {
            if (parseInt(bp) <= 990) {
              slider.swiper.params.breakpoints[bp].slidesPerView = 1;
              slider.swiper.params.breakpoints[bp].spaceBetween = 0;
            }
          });
          slider.swiper.update();
        }
      }
      fixSwiper();

      // Timesact pre-order app integration
      var container = section.querySelector('.product-form__buttons');
      if (container) {
        var preorderText = '';
        var updating = false;

        var observer = new MutationObserver(function() {
          if (updating) return;
          var btn = container.querySelector('.product-form__submit');
          if (!btn) return;

          // Capture pre-order text when Timesact first sets it
          if (btn.classList.contains('timesact-button') && !preorderText) {
            var span = btn.querySelector('span');
            if (span && span.textContent.trim()) {
              preorderText = span.textContent.trim();
            }
          }

          // Strip Timesact inline styles that shrink the button
          if (btn.classList.contains('timesact-button') && btn.getAttribute('style')) {
            updating = true;
            btn.removeAttribute('style');
            updating = false;
          }

          // Restore pre-order state if text reverted
          if (preorderText) {
            var span = btn.querySelector('span');
            if (!span) return;
            var needsUpdate = span.textContent.trim() !== preorderText || btn.disabled;
            if (needsUpdate) {
              updating = true;
              span.textContent = preorderText;
              btn.disabled = false;
              if (!btn.classList.contains('timesact-button')) {
                btn.classList.add('timesact-button');
              }
              updating = false;
            }
          }
        });

        observer.observe(container, { childList: true, subtree: true, characterData: true, attributes: true });
      }
    })();
  </script>
</section-product>

<style>
  .walkfully-product,
  .shopify-section:has(.walkfully-product) {
    background-color: #F7F1E5;
  }

  .walkfully-product__layout {
    display: flex;
    flex-wrap: wrap;
  }

  .walkfully-product__breadcrumbs {
    padding: 20px 30px 50px;
    flex-shrink: 0;
  }

  @media screen and (max-width: 990px) {
    .walkfully-product__breadcrumbs {
      display: none;
    }
  }

  /* Gallery */
  .walkfully-product__gallery {
    position: relative;
    overflow: hidden;
    width: 66.666%;
    max-width: 1120px;
    height: 614px;
    border-radius: 0 30px 30px 0;
  }

  @media screen and (min-width: 991px) {
    .walkfully-product__gallery {
      position: sticky;
      top: 0;
      align-self: start;
    }

    .walkfully-product__card {
      height: 270px;
    }
  }

  @media screen and (max-width: 990px) {
    .walkfully-product {
      padding-top: 0 !important;
      padding-bottom: 0 !important;
    }

    .walkfully-product__gallery {
      width: 100%;
      height: 60svh;
      max-height: none;
      border-radius: 0;
      position: sticky;
      top: 0;
      z-index: 0;
    }

    .walkfully-product__info {
      position: relative;
      z-index: 1;
      background: #F7F1E5;
      border-radius: 32px 32px 0 0;
      margin-top: -32px;
    }
  }

  /* Force gallery internals to fill 100% width and height */
  .walkfully-product__gallery .product-media-gallery {
    position: absolute;
    inset: 0;
  }

  .walkfully-product__gallery .product-media-gallery__content {
    width: 100%;
    height: 100%;
    margin: 0 !important;
    padding: 0 !important;
  }

  .walkfully-product__gallery .slider {
    width: 100%;
    height: 100%;
    padding-inline: 0 !important;
  }

  .walkfully-product__gallery .swiper-wrapper {
    height: 100% !important;
  }

  .walkfully-product__gallery .swiper-slide {
    height: 100% !important;
  }

  .walkfully-product__gallery .swiper-slide .image {
    width: 100%;
    height: 100%;
    max-width: none !important;
    aspect-ratio: unset !important;
    border-radius: 0 !important;
  }

  .walkfully-product__gallery .image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 0 !important;
  }

  /* Gallery pagination dots — force visible on all breakpoints */
  .walkfully-product .product-media-gallery .swiper-pagination {
    display: flex !important;
    position: absolute !important;
    bottom: 50px !important;
    top: unset !important;
    left: 50% !important;
    right: unset !important;
    transform: translateX(-50%) !important;
    justify-content: center;
    align-items: center;
    gap: 4px;
    z-index: 10;
    width: auto !important;
    padding: 0 !important;
  }

  .walkfully-product .product-media-gallery .swiper-pagination-bullet {
    opacity: 1 !important;
    background: #F7F1E5 !important;
    width: 12px !important;
    height: 12px !important;
    margin: 0 !important;
    padding: 0 !important;
    border-radius: 20px !important;
    border: none !important;
    transition: width 0.3s ease, background 0.3s ease;
    cursor: pointer;
  }

  .walkfully-product .product-media-gallery .swiper-pagination-bullet div,
  .walkfully-product .product-media-gallery .swiper-pagination-bullet span {
    display: none !important;
  }

  .walkfully-product .product-media-gallery .swiper-pagination-bullet-active {
    width: 24px !important;
    background: transparent !important;
    border: 1px solid #F7F1E5 !important;
  }

  /* Hide swiper nav arrows */
  .walkfully-product__gallery .swiper-button-prev,
  .walkfully-product__gallery .swiper-button-next {
    display: none;
  }

  /* Hide default gallery chrome */
  .walkfully-product__gallery .product-media-gallery-item__badge {
    display: none;
  }

  /* Product Info */
  .walkfully-product__info {
    width: 33.333%;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px 50px 40px 15px;
    box-sizing: border-box;
  }

  @media screen and (min-width: 991px) and (max-width: 1400px) {
    .walkfully-product__gallery {
      width: 58%;
      height: 520px;
    }

    .walkfully-product__info {
      width: 42%;
      padding: 30px 30px 30px 15px;
    }

    .walkfully-product__header {
      width: 100%;
      margin-bottom: 30px;
    }

    .walkfully-product__title {
      font-size: 40px;
    }

    .walkfully-product__description {
      font-size: 16px;
    }

    .walkfully-product__card {
      height: auto;
      padding: 24px;
      margin-bottom: 40px;
    }

    .walkfully-product__swatch-item {
      width: 70px;
    }

    .walkfully-product__swatch-item .swatch__swatch {
      width: 56px;
      height: 56px;
    }

    .walkfully-product__swatch-name {
      font-size: 12px;
    }

    .walkfully-product__purchase {
      gap: 12px;
    }

    .walkfully-product__add-to-cart {
      font-size: 13px;
      height: 48px;
      padding: 8px 16px;
    }

    .walkfully-product__trust-badges {
      gap: 14px;
    }

    .walkfully-product__trust-badge-text {
      font-size: 12px;
    }

    .walkfully-product__trust-badge svg {
      width: 20px;
      height: 20px;
    }
  }

  @media screen and (max-width: 990px) {
    .walkfully-product__info {
      width: 100%;
      padding: 50px 20px 30px;
    }

    .walkfully-product__info-inner {
      max-width: 100%;
    }

    .walkfully-product__header {
      width: 100%;
      max-width: 100%;
      margin-bottom: 30px;
      gap: 12px;
    }

    .walkfully-product__card {
      height: auto;
      min-height: 0;
      padding: 30px 24px;
      gap: 30px;
      margin-bottom: 30px;
      overflow: visible;
    }

    .walkfully-product__option {
      flex-direction: column;
      align-items: flex-start;
      gap: 16px;
    }

    .walkfully-product__option-label br {
      display: none;
    }

    .walkfully-product__fieldset {
      width: 100%;
    }

    .walkfully-product__swatches {
      gap: 12px;
      width: 100%;
    }

    .walkfully-product__swatch-item {
      width: 56px;
    }

    .walkfully-product__swatch-item .swatch__swatch {
      width: 56px;
      height: 56px;
    }

    .walkfully-product__swatch-name {
      font-size: 13px;
    }

    .walkfully-product__purchase {
      gap: 16px;
    }

    .walkfully-product__price .price-item {
      font-size: 20px;
    }

    .walkfully-product__add-to-cart {
      font-size: 13px;
      padding: 10px 16px;
      gap: 8px;
      white-space: nowrap;
    }

    .walkfully-product__trust-badges {
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px 16px;
    }

    .walkfully-product__trust-badge {
      gap: 8px;
    }

    .walkfully-product__trust-badge-text {
      font-size: 13px;
    }

    .walkfully-product__trust-badge svg {
      width: 20px;
      height: 20px;
    }
  }

  @media screen and (max-width: 480px) {
    .walkfully-product__info {
      padding: 40px 16px;
    }

    .walkfully-product__header {
      margin-bottom: 24px;
    }

    .walkfully-product__card {
      padding: 20px 16px;
      gap: 20px;
      margin-bottom: 24px;
    }

    .walkfully-product__swatch-item {
      width: 52px;
    }

    .walkfully-product__swatch-item .swatch__swatch {
      width: 52px;
      height: 52px;
    }

    .walkfully-product__swatches {
      gap: 10px;
    }

    .walkfully-product__purchase {
      flex-direction: column;
      gap: 16px;
      align-items: stretch;
    }

    .walkfully-product__price {
      text-align: center;
    }

    .walkfully-product__trust-badges {
      flex-direction: column;
      align-items: flex-start;
      gap: 12px;
    }
  }

  .walkfully-product__info-inner {
    width: 100%;
    max-width: 480px;
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  .walkfully-product__header {
    margin-bottom: 42px;
  }

  .walkfully-product__card {
    margin-bottom: 60px;
  }

  /* Header (title + description) */
  .walkfully-product__header {
    width: 330px;
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }

  .walkfully-product__title {
    font-family: var(--font-heading-family);
    font-size: 50px;
    font-weight: 700;
    line-height: 1;
    letter-spacing: -0.5px;
    text-transform: uppercase;
    color: #21262F;
    margin: 0;
  }

  @media screen and (max-width: 990px) {
    .walkfully-product__title {
      font-size: 36px;
    }
  }

  .walkfully-product__description {
    font-family: var(--font-body-family);
    font-size: 18px;
    font-weight: 400;
    line-height: 1.3;
    letter-spacing: -0.18px;
    color: #21262F;
    margin: 0;
    text-align: center;
  }

  @media screen and (max-width: 990px) {
    .walkfully-product__description {
      font-size: 16px;
    }
  }

  /* Product Card */
  .walkfully-product__card {
    background: #FFFBF2;
    border-radius: 20px;
    padding: 30px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 30px;
    box-sizing: border-box;
  }

  /* Variant option — label left, swatches right */
  .walkfully-product__option {
    display: flex;
    align-items: center;
    gap: 20px;
  }

  .walkfully-product__option-label {
    font-family: var(--font-body-family);
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    color: #21262F;
    line-height: normal;
    flex-shrink: 0;
  }

  .walkfully-product__fieldset {
    border: none;
    padding: 0;
    margin: 0;
    flex: 1;
  }

  /* Swatches */
  .walkfully-product__swatches {
    display: flex;
    gap: 15px;
    justify-content: center;
  }

  .walkfully-product__swatch-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    width: 95px;
  }

  .walkfully-product__swatch-item .swatch__label {
    cursor: pointer;
  }

  .walkfully-product__swatch-item .swatch__swatch {
    width: 74px;
    height: 74px;
    border-radius: 50%;
    border: none !important;
    box-shadow: none !important;
    outline: 2px solid transparent;
    outline-offset: 2px;
    transition: outline-color 0.2s ease;
    box-sizing: border-box;
  }

  .walkfully-product__swatch-item .swatch__input:checked + .swatch__label .swatch__swatch {
    outline-color: #D14626;
  }

  .walkfully-product__swatch-name {
    font-family: var(--font-body-family);
    font-size: 14px;
    font-weight: 400;
    line-height: 1.3;
    letter-spacing: -0.14px;
    color: #21262F;
    text-align: center;
  }

  /* Purchase row (price + button) */
  .walkfully-product__purchase {
    display: flex;
    align-items: center;
    gap: 20px;
  }

  .walkfully-product__price {
    flex-shrink: 0;
  }

  .walkfully-product__price .price-item {
    font-family: var(--font-heading-family);
    font-size: 22px;
    font-weight: 400;
    line-height: normal;
    text-transform: uppercase;
    letter-spacing: 0.88px;
    color: #21262F;
  }

  .walkfully-product__price .price .price__sale .price-item--sale {
    color: #D14626;
  }

  /* Add to Cart */
  .walkfully-product__form {
    flex: 1;
  }

  .walkfully-product__add-to-cart {
    width: 100%;
    height: 56px;
    background-color: #D14626;
    color: #F7F1E5;
    border: none;
    border-radius: 3px;
    font-family: var(--font-body-family);
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    transition: opacity 0.2s ease;
    padding: 10px 20px;
  }

  .walkfully-product__purchase .product-form__submit-wrapper {
    flex: 1;
    flex-direction: column;
  }

  .walkfully-product__add-to-cart:hover,
  .walkfully-product__add-to-cart.timesact-button:hover {
    background-color: #b83b1f !important;
  }

  .walkfully-product__add-to-cart:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .walkfully-product__add-to-cart .icon {
    color: #F7F1E5;
    flex-shrink: 0;
  }

  .walkfully-product__add-to-cart .loader {
    display: none;
  }

  .walkfully-product__add-to-cart.loading .loader {
    display: block;
  }

  .walkfully-product__add-to-cart.loading span,
  .walkfully-product__add-to-cart.loading .icon {
    display: none;
  }

  /* Reset theme btn styles — our custom styles take priority */
  .walkfully-product .walkfully-product__add-to-cart.btn {
    background-color: #D14626;
    color: #F7F1E5;
    border: none;
    border-radius: 3px;
    height: 56px;
    font-family: var(--font-body-family);
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    padding: 10px 20px;
  }

  /* When Timesact pre-order takes over, override disabled look */
  .walkfully-product__add-to-cart.timesact-button {
    opacity: 1 !important;
    cursor: pointer !important;
  }

  /* Fade in button text to prevent flash of "Add to cart" before app replaces it */
  .walkfully-product__add-to-cart > span {
    animation: walkfully-fade-in 0.2s ease 0.4s both;
  }

  @keyframes walkfully-fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Style the Timesact selling plan description — below the button */
  .walkfully-product .timesact-selling-plan-description {
    font-family: var(--font-body-family);
    font-size: 13px !important;
    color: #21262F !important;
    text-align: left !important;
    margin: 8px 0 0 !important;
    width: 100%;
  }

  /* Trust Badges */
  .walkfully-product__trust-badges {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
  }

  .walkfully-product__trust-badge {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .walkfully-product__trust-badge svg {
    flex-shrink: 0;
  }

  .walkfully-product__trust-badge-text {
    font-family: var(--font-body-family);
    font-size: 14px;
    font-weight: 400;
    line-height: 1.3;
    letter-spacing: -0.14px;
    color: #21262F;
    white-space: nowrap;
  }

</style>

{% schema %}
{
  "name": "t:sections.walkfully_product.name",
  "tag": "section",
  "settings": [],
  "blocks": [
    {
      "type": "trust_badge",
      "name": "t:sections.walkfully_product.blocks.trust_badge.name",
      "limit": 5,
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "t:sections.walkfully_product.blocks.trust_badge.settings.icon.label",
          "options": [
            { "value": "shipping", "label": "Shipping" },
            { "value": "returns", "label": "Returns" },
            { "value": "secure-checkout", "label": "Secure checkout" }
          ],
          "default": "shipping"
        },
        {
          "type": "text",
          "id": "text",
          "label": "t:sections.walkfully_product.blocks.trust_badge.settings.text.label",
          "default": "Free returns"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Walkfully product",
      "blocks": [
        {
          "type": "trust_badge",
          "settings": {
            "icon": "shipping",
            "text": "Ships in 2–4 days"
          }
        },
        {
          "type": "trust_badge",
          "settings": {
            "icon": "returns",
            "text": "Free returns"
          }
        },
        {
          "type": "trust_badge",
          "settings": {
            "icon": "secure-checkout",
            "text": "Secure checkout"
          }
        }
      ]
    }
  ]
}
{% endschema %}
