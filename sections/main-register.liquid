{%- liquid
  assign feature_image = settings.account_image
  assign aspect_ratio = settings.account_image_aspect_ratio

  if section.settings.featured_image != blank
    assign feature_image = section.settings.featured_image
    assign aspect_ratio = section.settings.featured_image_aspect_ratio
  endif

  assign has_image = false
  if feature_image != blank
    assign has_image = true
  endif
-%}

<div
  class="
    customer-login
    grid
    color-{{ section.settings.color_scheme }}
    {% render 'section-classes', settings: section.settings -%}
  "
>
  <div class="grid__content grid__content--plus-row-gap">
    {% if has_image %}
      <div class="grid__item--span-12 grid__item--span-6-tablet">
    {% else %}
      <div class="grid__item--span-12 content-container">
        <div class="content-narrower">
    {% endif %}

    <div class="customer-login__form-wrapper">
      <h1 class="fs-3 ta-center">
        {{ 'customer.register.title' | t }}
      </h1>
      {%- form 'create_customer', novalidate: 'novalidate' -%}
        {%- if form.errors -%}
          <div class="form__message form__message--error fs--1" role="alert">
            <h3 class="form__message-heading fs-0 ff-b" tabindex="-1" autofocus>
              {% render 'theme-icon', icon: 'alert-circle', size: '1em' %}
              {{ 'templates.contact.form.error_heading' | t }}
            </h3>
            <ul class="form__message__error-list">
              {%- for field in form.errors -%}
                <li>
                  {%- if field == 'form' -%}
                    {{ form.errors.messages[field] }}
                  {%- else -%}
                    <a href="#RegisterForm-{{ field }}">
                      {{ form.errors.translated_fields[field] | capitalize }}
                      {{ form.errors.messages[field] }}
                    </a>
                  {%- endif -%}
                </li>
              {%- endfor -%}
            </ul>
          </div>
        {%- endif -%}
        <div class="field">
          <label for="register-first-name" class="fs--1">
            {{ 'customer.register.first_name' | t }}
          </label>
          <input
            type="text"
            name="customer[first_name]"
            id="register-first-name"
            {% if form.first_name %}
              value="{{ form.first_name }}"
            {% endif %}
            autocomplete="given-name"
            placeholder="{{ 'customer.register.first_name' | t }}"
          >
        </div>
        <div class="field">
          <label for="register-last-name" class="fs--1">
            {{ 'customer.register.last_name' | t }}
          </label>
          <input
            type="text"
            name="customer[last_name]"
            id="register-last-name"
            {% if form.last_name %}
              value="{{ form.last_name }}"
            {% endif %}
            autocomplete="family-name"
            placeholder="{{ 'customer.register.last_name' | t }}"
          >
        </div>
        <div class="field">
          <label for="RegisterForm-email" class="fs--1">
            {{ 'customer.register.email' | t }}
          </label>
          <input
            type="email"
            name="customer[email]"
            id="RegisterForm-email"
            {% if form.email %}
              value="{{ form.email }}"
            {% endif %}
            spellcheck="false"
            autocapitalize="off"
            autocomplete="email"
            aria-required="true"
            {% if form.errors contains 'email' %}
              aria-invalid="true"
              aria-describedby="RegisterForm-email-error"
            {% endif %}
            placeholder="{{ 'customer.register.email' | t }}"
          >
        </div>
        {%- if form.errors contains 'email' -%}
          <div id="RegisterForm-email-error" class="form__field-message fs--1">
            {% render 'theme-icon', icon: 'alert-circle', size: '1em' %}
            <span>
              {{- form.errors.translated_fields.email | capitalize }}
              {{ form.errors.messages.email -}}
            </span>
          </div>
        {%- endif -%}
        <div class="field">
          <label for="RegisterForm-password" class="fs--1">
            {{ 'customer.register.password' | t }}
          </label>
          <input
            type="password"
            name="customer[password]"
            id="RegisterForm-password"
            aria-required="true"
            {% if form.errors contains 'password' %}
              aria-invalid="true"
              aria-describedby="RegisterForm-password-error"
            {% endif %}
            placeholder="{{ 'customer.register.password' | t }}"
          >
        </div>
        {%- if form.errors contains 'password' -%}
          <div id="RegisterForm-password-error" class="form__field-message fs--1">
            {% render 'theme-icon', icon: 'alert-circle', size: '1em' %}
            <span>
              {{ form.errors.translated_fields.password | capitalize }}
              {{ form.errors.messages.password }}.
            </span>
          </div>
        {%- endif -%}
        <button class="customer-login__submit-button btn btn--primary">
          {{ 'customer.register.submit' | t }}
        </button>
      {%- endform -%}
    </div>

    {% if has_image %}
      {% capture image_sizes %}
        {% render 'image-sizes', desktop_x_wide_width: 0.4453571429, desktop_wide_width: 0.4542307692, desktop_width: 0.4620636364, tablet_width: 0.4640666667, width: 0.9629960578 %}
      {% endcapture %}
      </div>
      <div class="grid__item--span-12 grid__item--span-6-tablet customer-login__featured-image">
        {% render 'image', image: feature_image, sizes: image_sizes, aspect_ratio: aspect_ratio %}
      </div>
    {% else %}
      </div>
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "t:sections.main-register.name",
  "tag": "section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:common.header__account_feature_image.content"
    },
    {
      "type": "paragraph",
      "content": "t:common.paragraph__account_feature_image.content"
    },
    {
      "type": "image_picker",
      "id": "featured_image",
      "label": "t:common.image.label"
    },
    {
      "type": "select",
      "id": "featured_image_aspect_ratio",
      "label": "t:common.aspect_ratio.label",
      "options": [
        {
          "value": "default",
          "label": "t:common.aspect_ratio.option__default"
        },
        {
          "value": "3-2",
          "label": "t:common.aspect_ratio.option__3_2"
        },
        {
          "value": "5-4",
          "label": "t:common.aspect_ratio.option__5_4"
        },
        {
          "value": "11-10",
          "label": "t:common.aspect_ratio.option__11_10"
        },
        {
          "value": "1-1",
          "label": "t:common.aspect_ratio.option__1_1"
        },
        {
          "value": "10-11",
          "label": "t:common.aspect_ratio.option__10_11"
        },
        {
          "value": "4-5",
          "label": "t:common.aspect_ratio.option__4_5"
        },
        {
          "value": "2-3",
          "label": "t:common.aspect_ratio.option__2_3"
        },
        {
          "value": "1-2",
          "label": "t:common.aspect_ratio.option__1_2"
        }
      ],
      "default": "10-11"
    },
    {
      "type": "header",
      "content": "t:common.header__section_spacing_and_border.content"
    },
    {
      "type": "select",
      "id": "section_spacing_top",
      "label": "t:common.top_spacing.label",
      "options": [
        {
          "value": "compact",
          "label": "t:common.sizing.compact"
        },
        {
          "value": "standard",
          "label": "t:common.sizing.standard"
        },
        {
          "value": "large",
          "label": "t:common.sizing.large"
        },
        {
          "value": "x-large",
          "label": "t:common.sizing.x_large"
        },
        {
          "value": "2x-large",
          "label": "t:common.sizing.x_x_large"
        }
      ],
      "default": "2x-large"
    },
    {
      "type": "select",
      "id": "section_spacing_bottom",
      "label": "t:common.bottom_spacing.label",
      "options": [
        {
          "value": "compact",
          "label": "t:common.sizing.compact"
        },
        {
          "value": "standard",
          "label": "t:common.sizing.standard"
        },
        {
          "value": "large",
          "label": "t:common.sizing.large"
        },
        {
          "value": "x-large",
          "label": "t:common.sizing.x_large"
        },
        {
          "value": "2x-large",
          "label": "t:common.sizing.x_x_large"
        }
      ],
      "default": "2x-large"
    },
    {
      "type": "checkbox",
      "id": "show_bottom_border",
      "label": "t:common.show_bottom_border.label",
      "default": false
    }
  ]
}
{% endschema %}
