{%- assign gift_card_recipient_control_flag = 'properties[__shopify_send_gift_card_to_recipient]' -%}
<component-gc-recipient-form
  class="gc-recipient-form"
  data-section-id="{{ section.id }}"
  data-product-variant-id="{{ product.selected_or_first_available_variant.id }}"
>
  <div class="gc-recipient-form__show-checkbox">
    <input
      data-show-form-checkbox
      type="checkbox"
      name="{{ gift_card_recipient_control_flag }}"
      disabled
      id="gc-checkbox-{{ section.id }}"
    >
    <label class="recipient-checkbox" for="gc-checkbox-{{ section.id }}">
      <span>{{ 'recipient.form.checkbox' | t }}</span>
    </label>
  </div>
  <div class="gc-recipient-form__fields" data-form-fields>
    <div
      class="product-form__recipient-error-message-wrapper form__message form__message--error fs--1"
      role="alert"
      {% unless form.errors %}
        hidden
      {% endunless %}
    >
      <h3 class="form__message-heading fs-0 ff-b" tabindex="-1" autofocus>
        {% render 'theme-icon', icon: 'alert-circle', size: '1em' %}
        <span class="error-message"> {{ 'templates.contact.form.error_heading' | t }}</span>
      </h3>

      <ul>
        {%- if form.errors -%}
          {%- for field in form.errors -%}
            <li>
              {%- if field == 'form' -%}
                {{ form.errors.messages[field] }}
              {%- else -%}
                <a href="#Recipient-{{ field }}-{{ section.id }}">
                  {{ form.errors.messages[field] }}
                </a>
              {%- endif -%}
            </li>
          {%- endfor -%}
        {%- endif -%}
      </ul>
    </div>

    <div class="gc-recipient-form__field field">
      <label class="fs--1" for="Recipient-email-{{ section.id }}">
        <span class="recipient-email-label">{{ 'recipient.form.email_label' | t }}</span>
      </label>
      <input
        id="Recipient-email-{{ section.id }}"
        data-email-input
        type="email"
        placeholder="{{ 'recipient.form.email' | t }}"
        name="properties[Recipient email]"
        value="{{ form.email }}"
        {% if form.errors contains 'email' %}
          aria-invalid="true"
          aria-describedby="RecipientForm-email-error-{{ section.id }}"
        {% endif %}
      >

      <div
        id="RecipientForm-email-error-{{ section.id }}"
        class="form__field-message{% unless form.errors contains 'email' %} hidden{% endunless %} fs--1"
      >
        {% render 'theme-icon', icon: 'alert-circle', size: '1em' %}
        <span class="error-message">
          {%- if form.errors contains 'email' -%}
            {{ form.errors.messages.email }}.
          {%- endif -%}
        </span>
      </div>
    </div>

    <div class="gc-recipient-form__field field">
      <label class="fs--1" for="Recipient-name-{{ section.id }}">
        {{- 'recipient.form.name_label' | t -}}
      </label>
      <input
        autocomplete="name"
        type="text"
        id="Recipient-name-{{ section.id }}"
        data-name-input
        name="properties[Recipient name]"
        placeholder="{{ 'recipient.form.name' | t }}"
        value="{{ form.name }}"
        {% if form.errors contains 'name' %}
          aria-invalid="true"
          aria-describedby="RecipientForm-name-error-{{ section.id }}"
        {% endif %}
      >

      <div
        id="RecipientForm-name-error-{{ section.id }}"
        class="form__field-message{% unless form.errors contains 'name' %} hidden{% endunless %} fs--1"
      >
        {% render 'theme-icon', icon: 'alert-circle', size: '1em' %}
        <span class="error-message">
          {%- if form.errors contains 'name' -%}
            {{ form.errors.messages.name }}.
          {%- endif -%}
        </span>
      </div>
    </div>

    {%- assign max_chars_message = 200 -%}
    {%- assign max_chars_message_rendered = 'recipient.form.max_characters' | t: max_chars: max_chars_message -%}
    {%- assign message_label_rendered = 'recipient.form.message_label' | t -%}
    <div class="field">
      <label class="fs--1" for="Recipient-message-{{ section.id }}">
        {{ message_label_rendered }}
      </label>
      <textarea
        rows="10"
        id="Recipient-message-{{ section.id }}"
        data-message-input
        name="properties[Message]"
        maxlength="{{ max_chars_message }}"
        placeholder="{{ 'recipient.form.message' | t: max_chars: max_chars_message_rendered }}"
        aria-label="{{ message_label_rendered }} {{ max_chars_message_rendered }}"
        {% if form.errors contains 'message' %}
          aria-invalid="true"
          aria-describedby="RecipientForm-message-error-{{ section.id }}"
        {% endif %}
      >{{ form.message }}</textarea>

      <div
        id="RecipientForm-message-error-{{ section.id }}"
        class="form__field-message{% unless form.errors contains 'message' %} hidden{% endunless %}"
      >
        {% render 'theme-icon', icon: 'alert-circle', size: '1em' %}
        <span class="error-message">
          {%- if form.errors contains 'message' -%}
            {{ form.errors.messages.message }}.
          {%- endif -%}
        </span>
      </div>
    </div>

    <div class="field">
      <label class="fs--1" for="Recipient-send_on-{{ section.id }}">
        {{ 'recipient.form.send_on_label' | t }}
      </label>
      <input
        autocomplete="send_on"
        type="date"
        id="Recipient-send_on-{{ section.id }}"
        data-send-on-date-input
        name="properties[Send on]"
        placeholder="{{ 'recipient.form.send_on' | t }}"
        pattern="\d{4}-\d{2}-\d{2}"
        value="{{ form.send_on }}"
        {% if form.errors contains 'send_on' %}
          aria-invalid="true"
          aria-describedby="RecipientForm-send_on-error-{{ section.id }}"
        {% endif %}
      >

      <div
        id="RecipientForm-send_on-error-{{ section.id }}"
        class="form__field-message{% unless form.errors contains 'send_on' %} hidden{% endunless %}"
      >
        {% render 'theme-icon', icon: 'alert-circle', size: '1em' %}
        <span class="error-message">
          {%- if form.errors contains 'send_on' -%}
            {{ form.errors.messages.send_on }}.
          {%- endif -%}
        </span>
      </div>
    </div>
  </div>

  <input
    type="hidden"
    name="{{ gift_card_recipient_control_flag }}"
    value="if_present"
    data-control-input
  >
  <input
    type="hidden"
    name="properties[__shopify_offset]"
    value=""
    data-timezone-offset
    disabled
  >
</component-gc-recipient-form>
