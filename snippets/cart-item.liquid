<li class="cart-item fs--1 {{ wrapper_class }}" data-quantity-button-container>
  <div class="cart-item__content">
    <div class="cart-item__image">
      <a
        href="{{ item.url }}"
        class="cart-item__image-link"
        tabindex="-1"
        aria-label="{{ 'accessibility.go_to_product_page' | t }}"
      >
        {%- render 'image',
          image: item.image,
          sizes: '90px',
          aspect_ratio: settings.product_card_aspect_ratio,
          shimmer_disabled: true,
          include_placeholder: true
        -%}
      </a>
    </div>
    <div class="cart-item__details">
      <div class="cart-item__details-content">
        <div class="cart-item__details-content-left">
          <a href="{{ item.url }}" class="cart-item__details-title">{{ item.product.title }}</a>

          {% unless item.product.has_only_default_variant -%}
            <small class="cart-item__details-variant-title">{{ item.variant.title }}</small>
          {%- endunless %}

          {% if item.properties.size != 0 %}
            {%- for property in item.properties -%}
              {%- assign property_first_char = property.first | slice: 0 -%}
              {%- if property.last != blank and property_first_char != '_' -%}
                <small class="cart-item__details-property-option">
                  <span class="cart-item__details-property-option-title">{{ property.first }}:</span>
                  {%- if property.last contains '/uploads/' -%}
                    <a
                      href="{{ property.last }}"
                      class="link"
                      target="_blank"
                    >
                      {{ property.last | split: '/' | last }}
                    </a>
                  {%- else -%}
                    {{ property.last }}
                  {%- endif -%}
                </small>
              {%- endif -%}
            {%- endfor -%}
          {% endif %}

          {% if item.selling_plan_allocation != null %}
            <small class="cart-item__details-property-option">
              <span>{{ 'sections.cart.subscription' | t }}</span>
              {{ item.selling_plan_allocation.selling_plan.name }}
            </small>
          {% endif %}
        </div>

        <div class="cart-item__details-content-right">
          <div
            class="cart-item__details-price-wrapper"
            data-is-sale="{{ is_sale_price }}"
          >
            <span class="cart-item__details-price">
              {% if item.original_line_price != item.final_line_price %}
                <s class="cart-item__original-price">
                  {{ item.original_price | money }}
                </s>
              {% endif %}
              {% assign price = item.final_price | money %}
              {% if item.quantity > 1 %}
                {{ 'sections.cart.price_with_quantity_html' | t: price: price, quantity: item.quantity }}
              {% else %}
                {{ price }}
              {% endif %}
            </span>

            {%- if item.variant.available and item.unit_price_measurement -%}
              <small class="unit-price">
                <span class="visually-hidden">{{ 'products.product.price.unit_price' | t }}</span>
                <span class="unit-price__price">
                  <span>{{- item.unit_price | money -}}</span>
                  <span aria-hidden="true">/</span>
                  <span class="visually-hidden">&nbsp;{{ 'accessibility.unit_price_separator' | t }}&nbsp;</span>
                  <span>
                    {%- if item.unit_price_measurement.reference_value != 1 -%}
                      {{- item.unit_price_measurement.reference_value -}}
                    {%- endif -%}
                    {{ item.unit_price_measurement.reference_unit }}
                  </span>
                </span>
              </small>
            {%- endif -%}
          </div>

          {% if item.line_level_discount_allocations.size > 0 %}
            <ul class="cart-item__details-discounts-list">
              {%- for discount in item.line_level_discount_allocations -%}
                <li class="cart-item__details-discounts-list-item fs--1">
                  {%- render 'theme-icon', icon: 'tag', size: '1em' -%}
                  <small>
                    {{ discount.discount_application.title | escape }}
                  </small>
                </li>
              {%- endfor -%}
            </ul>
          {% endif %}
        </div>
      </div>

      <div class="cart-item__footer">
        <div class="cart-item__footer-left">
          <component-quantity-button
            data-type="subtract"
            data-index="{{ item.index | plus: 1 }}"
            data-current-quantity="{{ item.quantity }}"
          >
            <button
              type="button"
              class="quantity-button quantity-button--icon"
              type="button"
              aria-label="{{ 'accessibility.increase_quantity' | t: product: item.product.title }}"
            >
              {% render 'theme-icon', icon: 'minus', size: '10px' %}
              {% render 'loader', type: 'circle-progress' %}
            </button>
          </component-quantity-button>
          <span class="cart-item__quanity-count" data-item-quantity>{{ item.quantity }}</span>
          <component-quantity-button
            data-type="add"
            data-index="{{ item.index | plus: 1 }}"
            data-current-quantity="{{ item.quantity }}"
          >
            <button
              type="button"
              class="quantity-button quantity-button--icon"
              type="button"
              aria-label="{{ 'accessibility.decrease_quantity' | t: product: item.product.title }}"
            >
              {% render 'theme-icon', icon: 'plus', size: '10px' %}
              {% render 'loader', type: 'circle-progress' %}
            </button>
          </component-quantity-button>
        </div>
        <div class="cart-item__footer-left">
          <component-quantity-button
            data-type="remove"
            data-index="{{ item.index | plus: 1 }}"
          >
            <button
              type="button"
              class="quantity-button quantity-button--trash"
              type="button"
              aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}"
            >
              {% render 'theme-icon', icon: 'trash', size: '1.5em' %}
            </button>
          </component-quantity-button>
        </div>
      </div>
    </div>
  </div>
  <div class="cart-item__error-message fs--1" data-error-message></div>
</li>
